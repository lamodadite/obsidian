## Thread?
- 응용 프로그램이 여러 작업을 동시에 수행할 수 있는 메커니즘
- 하나의 프로세스는 여러 스레드를 포함
- 모든 스레드는 같은 프로그램을 독립적으로 실행
- 스레드끼리는 전역 메모리를 모두 공유함
- 각각의 스레드는 독립된 스택 메모리를 가짐
- ![[Pasted image 20231128212113.png]]

## 전통적인 멀티 프로세스 방식과의 차이
- 프로세스간 통신이 어려움. IPC 기법을 따로 사용해야 함
- fork()를 통한 프로세스 생성은 비교적 비쌈
	- 페이지 테이블, 파일 디스크립터 테이블 등 여러가지 프로세스 속성을 모두 복사해야 함
- 스레드는 스레드 간 정보 공유가 쉽고 빠름
	- 데이터를 공유 변수에 복사하기만 하면 됨
	- 다만, 동기화 문제를 해결해야 함
- 스레드 생성은 프로세스 생성보다 10배 이상 빠름

## 스레드끼리 공유되는 속성
- 프로세스 ID
- 프로세스 그룹 ID와 세션 ID
- 제어 터미널
- 프로세스 자격증명
- 열린 파일 디스크립터
- 시그널 속성
- 내부 타이머 (timer_create())
## 스레드의 고유 속성
- 스레드 ID
- 시그널 마스크
- 스레드 고유 데이터
- 대체 시그널 스택
- errno 값
- 부동소수점 환경
- 실시간 스케줄링 정책과 우선순위
- CPU 친화도
- 스택

## 스레드의 약점
- 스레드를 사용할때는, 스레드 안전(thread-dafe)한지를 꼭 확인해야 함
	- 멀티프로세스는 이런 걱정을 안해도 됨
- 한 스레드의 버그(예: 잘못된 포인터로 메모리를 수정)가 프로세스 내의 모든 스레드에 피해를 줌
	- 모든 스레드가 같은 메모리 공간과 기타 속성을 공유하기 때문
	- 프로세스는 격리되어 있기 때문에 이런 걱정이 없음
- 각 스레드는 프로세스의 유한한 가상 주소 공간을 사용하려고 경쟁함
	- 각 스레드의 스택과 스레드별 데이터들은 프로세스의 가상 주소 공간을 소비하며, 독립적임
	- 때문에 다수의 스레드를 사용하다 보면 심각한 문제가 될 수 있음
- 멀티스레드 환경에서 시그널 처리는 세심한 설계가 필요함
- 모든 스레드는 같은 프로그램을 실행해야 함 (다른 함수를 실행할 수는 있음)
	- 멀티프로세스 환경에서는 프로세스별로 다른 프로그램을 실행할 수 있음